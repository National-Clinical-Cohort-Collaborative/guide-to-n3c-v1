<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The Researcher’s Guide to N3C - 2&nbsp; A Research Story</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/cycle.html" rel="next">
<link href="../chapters/intro.html" rel="prev">
<link href="../images/n3c-logo-circle-large-0.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5F685V8M7X"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-5F685V8M7X', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../assets/font-awesome.css">
<link rel="stylesheet" href="../assets/tables.css">
<meta name="citation_title" content="[[2]{.chapter-number}&nbsp; [A Research Story]{.chapter-title}]{#sec-story .quarto-section-identifier}">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Higher hospitalization and mortality rates among SARS-CoV-2-infected persons in rural america;,citation_author=Alfred Jerrod Anzalone;,citation_author=Ronald Horswell;,citation_author=Brian M Hendricks;,citation_author=San Chu;,citation_author=William B Hillegass;,citation_author=William H Beasley;,citation_author=Jeremy R Harper;,citation_author=Wesley Kimble;,citation_author=Clifford J Rosen;,citation_author=Lucio Miele;,citation_author=others;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_issue=1;,citation_doi=10.1111/jrh.12689;,citation_volume=39;,citation_journal_title=The Journal of Rural Health;,citation_publisher=Wiley Online Library;">
<meta name="citation_reference" content="citation_title=Harmonizing units and values of quantitative data elements in a very large nationally pooled electronic health record (EHR) dataset;,citation_author=Katie R Bradwell;,citation_author=Jacob T Wooldridge;,citation_author=Benjamin Amor;,citation_author=Tellen D Bennett;,citation_author=Adit Anand;,citation_author=Carolyn Bremer;,citation_author=Yun Jae Yoo;,citation_author=Zhenglong Qian;,citation_author=Steven G Johnson;,citation_author=Emily R Pfaff;,citation_author=others;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_issue=7;,citation_doi=10.1093/jamia/ocac054;,citation_volume=29;,citation_journal_title=Journal of the American Medical Informatics Association;,citation_publisher=Oxford University Press;">
<meta name="citation_reference" content="citation_title=A new method of classifying prognostic comorbidity in longitudinal studies: Development and validation;,citation_author=Mary E. Charlson;,citation_author=Peter Pompei;,citation_author=Kathy L. Ales;,citation_author=C.Ronald MacKenzie;,citation_publication_date=1987;,citation_cover_date=1987;,citation_year=1987;,citation_fulltext_html_url=https://www.sciencedirect.com/science/article/pii/0021968187901718;,citation_issue=5;,citation_doi=10.1016/0021-9681(87)90171-8;,citation_issn=0021-9681;,citation_volume=40;,citation_journal_title=Journal of Chronic Diseases;">
<meta name="citation_reference" content="citation_title=Informatics playbook;,citation_author=Chunlei Wu;,citation_author=undefined C2DH;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_publisher=https://playbook.cd2h.org/;">
<meta name="citation_reference" content="citation_title=COVID-19 TestNorm: A tool to normalize COVID-19 testing names to LOINC codes;,citation_author=Xiao Dong;,citation_author=Jianfu Li;,citation_author=Ekin Soysal;,citation_author=Jiang Bian;,citation_author=Scott L DuVall;,citation_author=Elizabeth Hanchrow;,citation_author=Hongfang Liu;,citation_author=Kristine E Lynch;,citation_author=Michael Matheny;,citation_author=Karthik Natarajan;,citation_author=others;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_issue=9;,citation_doi=10.1093/jamia/ocaa145;,citation_volume=27;,citation_journal_title=Journal of the American Medical Informatics Association;,citation_publisher=Oxford University Press;">
<meta name="citation_reference" content="citation_title=Regression and other stories;,citation_author=undefined Andrew Gelman;,citation_author=Aki Vehtari;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=http://www.cambridge.org/9781107676510;">
<meta name="citation_reference" content="citation_title=Clinical concept value sets and interoperability in health data analytics;,citation_author=Sigfried Gold;,citation_author=Andrea Batch;,citation_author=Robert McClure;,citation_author=Guoqian Jiang;,citation_author=Hadi Kharrazi;,citation_author=Rishi Saripalle;,citation_author=Vojtech Huser;,citation_author=Chunhua Weng;,citation_author=Nancy Roderer;,citation_author=Ana Szarfman;,citation_author=others;,citation_publication_date=2018;,citation_cover_date=2018;,citation_year=2018;,citation_volume=2018;,citation_conference_title=AMIA annual symposium proceedings;,citation_conference=American Medical Informatics Association;">
<meta name="citation_reference" content="citation_title=Practices, norms, and aspirations regarding the construction, validation, and reuse of code sets in the analysis of real-world data;,citation_author=Sigfried Gold;,citation_author=Harold Lehmann;,citation_author=Lisa Schilling;,citation_author=Wayne Lutters;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_journal_title=medRxiv;,citation_publisher=Cold Spring Harbor Laboratory Press;">
<meta name="citation_reference" content="citation_title=The National COVID Cohort Collaborative (N3C): Rationale, design, infrastructure, and deployment;,citation_abstract=Coronavirus disease 2019 (COVID-19) poses societal challenges that require expeditious data and knowledge sharing. Though organizational clinical data are abundant, these are largely inaccessible to outside researchers. Statistical, machine learning, and causal analyses are most successful with large-scale data beyond what is available in any given organization. Here, we introduce the National COVID Cohort Collaborative (N3C), an open science community focused on analyzing patient-level data from many centers.The Clinical and Translational Science Award Program and scientific community created N3C to overcome technical, regulatory, policy, and governance barriers to sharing and harmonizing individual-level clinical data. We developed solutions to extract, aggregate, and harmonize data across organizations and data models, and created a secure data enclave to enable efficient, transparent, and reproducible collaborative analytics.Organized in inclusive workstreams, we created legal agreements and governance for organizations and researchers; data extraction scripts to identify and ingest positive, negative, and possible COVID-19 cases; a data quality assurance and harmonization pipeline to create a single harmonized dataset; population of the secure data enclave with data, machine learning, and statistical analytics tools; dissemination mechanisms; and a synthetic data pilot to democratize data access.The N3C has demonstrated that a multisite collaborative learning health network can overcome barriers to rapidly build a scalable infrastructure incorporating multiorganizational clinical data for COVID-19 analytics. We expect this effort to save lives by enabling rapid collaboration among clinicians, researchers, and data scientists to identify treatments and specialized care and thereby reduce the immediate and long-term impacts of COVID-19.;,citation_author=Melissa A Haendel;,citation_author=Christopher G Chute;,citation_author=Tellen D Bennett;,citation_author=David A Eichmann;,citation_author=Justin Guinney;,citation_author=Warren A Kibbe;,citation_author=Philip R O Payne;,citation_author=Emily R Pfaff;,citation_author=Peter N Robinson;,citation_author=Joel H Saltz;,citation_author=Heidi Spratt;,citation_author=Christine Suver;,citation_author=John Wilbanks;,citation_author=Adam B Wilcox;,citation_author=Andrew E Williams;,citation_author=Chunlei Wu;,citation_author=Clair Blacketer;,citation_author=Robert L Bradford;,citation_author=James J Cimino;,citation_author=Marshall Clark;,citation_author=Evan W Colmenares;,citation_author=Patricia A Francis;,citation_author=Davera Gabriel;,citation_author=Alexis Graves;,citation_author=Raju Hemadri;,citation_author=Stephanie S Hong;,citation_author=George Hripscak;,citation_author=Dazhi Jiao;,citation_author=Jeffrey G Klann;,citation_author=Kristin Kostka;,citation_author=Adam M Lee;,citation_author=Harold P Lehmann;,citation_author=Lora Lingrey;,citation_author=Robert T Miller;,citation_author=Michele Morris;,citation_author=Shawn N Murphy;,citation_author=Karthik Natarajan;,citation_author=Matvey B Palchuk;,citation_author=Usman Sheikh;,citation_author=Harold Solbrig;,citation_author=Shyam Visweswaran;,citation_author=Anita Walden;,citation_author=Kellie M Walters;,citation_author=Griffin M Weber;,citation_author=Xiaohan Tanner Zhang;,citation_author=Richard L Zhu;,citation_author=Benjamin Amor;,citation_author=Andrew T Girvin;,citation_author=Amin Manna;,citation_author=Nabeel Qureshi;,citation_author=Michael G Kurilla;,citation_author=Sam G Michael;,citation_author=Lili M Portilla;,citation_author=Joni L Rutter;,citation_author=Christopher P Austin;,citation_author=Ken R Gersing;,citation_author=undefined N3C Consortium;,citation_publication_date=2020-08;,citation_cover_date=2020-08;,citation_year=2020;,citation_fulltext_html_url=https://doi.org/10.1093/jamia/ocaa196;,citation_issue=3;,citation_doi=10.1093/jamia/ocaa196;,citation_issn=1527-974X;,citation_volume=28;,citation_journal_title=Journal of the American Medical Informatics Association;">
<meta name="citation_reference" content="citation_title=Comparing population-based risk-stratification model performance using demographic, diagnosis and medication data extracted from outpatient electronic health records versus administrative claims;,citation_author=Hadi Kharrazi;,citation_author=Winnie Chi;,citation_author=Hsien-Yen Chang;,citation_author=Thomas M Richards;,citation_author=Jason M Gallagher;,citation_author=Susan M Knudson;,citation_author=Jonathan P Weiner;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_issue=8;,citation_doi=10.1097/MLR.0000000000000754;,citation_volume=55;,citation_journal_title=Medical care;,citation_publisher=JSTOR;">
<meta name="citation_reference" content="citation_title=Literate programming;,citation_author=Donald E. Knuth;,citation_publication_date=1984-05;,citation_cover_date=1984-05;,citation_year=1984;,citation_fulltext_html_url=https://doi.org/10.1093/comjnl/27.2.97;,citation_issue=2;,citation_doi=10.1093/comjnl/27.2.97;,citation_issn=0010-4620;,citation_volume=27;,citation_journal_title=Comput. J.;,citation_publisher=Oxford University Press, Inc.;">
<meta name="citation_reference" content="citation_title=Use of hydroxychloroquine, remdesivir, and dexamethasone among adults hospitalized with covid-19 in the united states: A retrospective cohort study;,citation_author=Hemalkumar B. Mehta;,citation_author=Huijun An;,citation_author=Kathleen M. Andersen;,citation_author=Omar Mansour;,citation_author=Vithal Madhira;,citation_author=Emaan S. Rashidi;,citation_author=Benjamin Bates;,citation_author=Soko Setoguchi;,citation_author=Corey Joseph;,citation_author=Paul T. Kocis;,citation_author=Richard Moffitt;,citation_author=Tellen D. Bennett;,citation_author=Christopher G. Chute;,citation_author=Brian T. Garibaldi;,citation_author=G. Caleb Alexander;,citation_publication_date=2021-10-01;,citation_cover_date=2021-10-01;,citation_year=2021;,citation_issue=10;,citation_doi=10.7326/M21-0857;,citation_issn=0003-4819;,citation_volume=174;,citation_journal_title=Annals of Internal Medicine;,citation_publisher=American College of Physicians;">
<meta name="citation_reference" content="citation_title=The book of OHDSI: Observational health data sciences and informatics;,citation_author=undefined OHDSI;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://ohdsi.github.io/TheBookOfOhdsi/;,citation_isbn=9781088855195;">
<meta name="citation_reference" content="citation_title=Documentation: Code repositories overview;,citation_author=undefined Palantir;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_publisher=https://www.palantir.com/docs/foundry/code-repositories/overview/;">
<meta name="citation_reference" content="citation_title=Identifying who has long COVID in the USA: A machine learning approach using N3C data.;,citation_author=E. R. Pfaff;,citation_author=A. T. Girvin;,citation_author=T. D. Bennett;,citation_author=A. Bhatia;,citation_author=I. M. Brooks;,citation_author=R. R. Deer;,citation_author=J. P. Dekermanjian;,citation_author=S. E. Jolley;,citation_author=M. G. Kahn;,citation_author=K. Kostka;,citation_author=J. A. McMurry;,citation_author=R. Moffitt;,citation_author=A. Walden;,citation_author=C. G. Chute;,citation_author=M. A. Haendel;,citation_author=C. Bramante;,citation_author=D. Dorr;,citation_author=M. Morris;,citation_author=A. M. Parker;,citation_author=H. Sidky;,citation_author=K. Gersing;,citation_author=S. Hong;,citation_author=E. Niehaus;,citation_publication_date=2022-05;,citation_cover_date=2022-05;,citation_year=2022;,citation_fulltext_html_url=https://doi.org/10.1016/S2589-7500(22)00048-6;,citation_issue=7;,citation_doi=10.1016/S2589-7500(22)00048-6;,citation_issn=0010-4620;,citation_volume=4;,citation_journal_title=Lancet Digit Health;">
<meta name="citation_reference" content="citation_title=Synergies between centralized and federated approaches to data quality: A report from the national COVID cohort collaborative;,citation_author=Emily R Pfaff;,citation_author=Andrew T Girvin;,citation_author=Davera L Gabriel;,citation_author=Kristin Kostka;,citation_author=Michele Morris;,citation_author=Matvey B Palchuk;,citation_author=Harold P Lehmann;,citation_author=Benjamin Amor;,citation_author=Mark Bissell;,citation_author=Katie R Bradwell;,citation_author=others;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_issue=4;,citation_doi=10.1093/jamia/ocab217;,citation_volume=29;,citation_journal_title=Journal of the American Medical Informatics Association;,citation_publisher=Oxford University Press;">
<meta name="citation_reference" content="citation_title=Generalisable long COVID subtypes: Findings from the NIH N3C and RECOVER programmes;,citation_author=Justin T Reese;,citation_author=Hannah Blau;,citation_author=Elena Casiraghi;,citation_author=Timothy Bergquist;,citation_author=Johanna J Loomba;,citation_author=Tiffany J Callahan;,citation_author=Bryan Laraway;,citation_author=Corneliu Antonescu;,citation_author=Ben Coleman;,citation_author=Michael Gargano;,citation_author=others;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_doi=10.1016/j.ebiom.2022.104413;,citation_volume=87;,citation_journal_title=EBioMedicine;,citation_publisher=Elsevier;">
<meta name="citation_reference" content="citation_title=Electronic health records based phenotyping in next-generation clinical trials: A perspective from the NIH health care systems collaboratory;,citation_author=Rachel L Richesson;,citation_author=W Ed Hammond;,citation_author=Meredith Nahm;,citation_author=Douglas Wixted;,citation_author=Gregory E Simon;,citation_author=Jennifer G Robinson;,citation_author=Alan E Bauck;,citation_author=Denise Cifelli;,citation_author=Michelle M Smerek;,citation_author=John Dickerson;,citation_author=others;,citation_publication_date=2013;,citation_cover_date=2013;,citation_year=2013;,citation_issue=e2;,citation_doi=10.1136/amiajnl-2013-001926;,citation_volume=20;,citation_journal_title=Journal of the American Medical Informatics Association;,citation_publisher=BMJ Publishing Group;">
<meta name="citation_reference" content="citation_title=Outcomes of COVID-19 in patients with cancer: Report from the national COVID cohort collaborative (N3C);,citation_author=Noha Sharafeldin;,citation_author=Benjamin Bates;,citation_author=Qianqian Song;,citation_author=Vithal Madhira;,citation_author=Yao Yan;,citation_author=Sharlene Dong;,citation_author=Eileen Lee;,citation_author=Nathaniel Kuhrt;,citation_author=Yu Raymond Shao;,citation_author=Feifan Liu;,citation_author=Timothy Bergquist;,citation_author=Justin Guinney;,citation_author=Jing Su;,citation_author=Umit Topaloglu;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_issue=20;,citation_doi=10.1200/JCO.21.01074;,citation_volume=39;,citation_journal_title=Journal of Clinical Oncology;">
<meta name="citation_reference" content="citation_title=Association between immune dysfunction and COVID-19 breakthrough infection after SARS-CoV-2 vaccination in the US;,citation_author=Jing Sun;,citation_author=Qulu Zheng;,citation_author=Vithal Madhira;,citation_author=Amy L. Olex;,citation_author=Alfred J. Anzalone;,citation_author=Amanda Vinson;,citation_author=Jasvinder A. Singh;,citation_author=Evan French;,citation_author=Alison G. Abraham;,citation_author=Jomol Mathew;,citation_author=Nasia Safdar;,citation_author=Gaurav Agarwal;,citation_author=Kathryn C. Fitzgerald;,citation_author=Namrata Singh;,citation_author=Umit Topaloglu;,citation_author=Christopher G. Chute;,citation_author=Roslyn B. Mannon;,citation_author=Gregory D. Kirk;,citation_author=Rena C. Patel;,citation_publication_date=2022-02;,citation_cover_date=2022-02;,citation_year=2022;,citation_issue=2;,citation_doi=10.1001/jamainternmed.2021.7024;,citation_issn=2168-6106;,citation_volume=182;,citation_journal_title=Archives of internal medicine (Chicago, Ill. : 1908);,citation_publisher=American Medical Association;">
<meta name="citation_reference" content="citation_title=Synthea™ novel coronavirus (COVID-19) model and synthetic data set;,citation_author=Jason Walonoski;,citation_author=Sybil Klaus;,citation_author=Eldesia Granger;,citation_author=Dylan Hall;,citation_author=Andrew Gregorowicz;,citation_author=George Neyarapally;,citation_author=Abigail Watson;,citation_author=Jeff Eastman;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_fulltext_html_url=https://www.sciencedirect.com/science/article/pii/S2666521220300077;,citation_doi=doi.org/10.1016/j.ibmed.2020.100007;,citation_issn=2666-5212;,citation_volume=1-2;,citation_journal_title=Intelligence-Based Medicine;">
<meta name="citation_reference" content="citation_title=R for data science;,citation_author=undefined Hadley Wickham;,citation_author=Garrett Grolemund;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://r4ds.hadley.nz/;">
<meta name="citation_reference" content="citation_title=The FAIR guiding principles for scientific data management and stewardship;,citation_author=Mark D Wilkinson;,citation_author=Michel Dumontier;,citation_author=IJsbrand Jan Aalbersberg;,citation_author=Gabrielle Appleton;,citation_author=Myles Axton;,citation_author=Arie Baak;,citation_author=Niklas Blomberg;,citation_author=Jan-Willem Boiten;,citation_author=Luiz Bonino Silva Santos;,citation_author=Philip E Bourne;,citation_author=others;,citation_publication_date=2016;,citation_cover_date=2016;,citation_year=2016;,citation_doi=10.1038/sdata.2016.18;,citation_volume=3;,citation_journal_title=Scientific data;,citation_publisher=Nature Publishing Group;">
<meta name="citation_reference" content="citation_title=Knitr: A comprehensive tool for reproducible research in R;,citation_author=Yihui Xie;,citation_editor=Victoria Stodden;,citation_editor=Friedrich Leisch;,citation_editor=Roger D. Peng;,citation_publication_date=2014;,citation_cover_date=2014;,citation_year=2014;,citation_fulltext_html_url=http://www.crcpress.com/product/isbn/9781466561595;,citation_inbook_title=Implementing reproducible computational research;">
<meta name="citation_reference" content="citation_title=Dynamic documents with R and knitr;,citation_author=Yihui Xie;,citation_publication_date=2015;,citation_cover_date=2015;,citation_year=2015;,citation_fulltext_html_url=http://yihui.org/knitr/;">
<meta name="citation_reference" content="citation_title=Bookdown: Authoring books and technical documents with R markdown;,citation_author=Yihui Xie;,citation_publication_date=2016;,citation_cover_date=2016;,citation_year=2016;,citation_fulltext_html_url=https://bookdown.org/yihui/bookdown;">
<meta name="citation_reference" content="citation_title=R markdown: The definitive guide;,citation_author=Yihui Xie;,citation_author=J. J. Allaire;,citation_author=Garrett Grolemund;,citation_publication_date=2018;,citation_cover_date=2018;,citation_year=2018;,citation_fulltext_html_url=https://bookdown.org/yihui/rmarkdown;">
<meta name="citation_reference" content="citation_title=R markdown cookbook;,citation_author=Yihui Xie;,citation_author=Christophe Dervieux;,citation_author=Emily Riederer;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_fulltext_html_url=https://bookdown.org/yihui/rmarkdown-cookbook;">
<meta name="citation_reference" content="citation_title=Associations between HIV infection and clinical spectrum of COVID-19: A population level analysis based on US national COVID cohort collaborative (N3C) data;,citation_author=Xueying Yang;,citation_author=Jing Sun;,citation_author=Rena C Patel;,citation_author=Jiajia Zhang;,citation_author=Siyuan Guo;,citation_author=Qulu Zheng;,citation_author=Amy L Olex;,citation_author=Bankole Olatosi;,citation_author=Sharon B Weissman;,citation_author=Jessica Y Islam;,citation_author=others;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_issue=11;,citation_doi=10.1016/S2352-3018(21)00239-3;,citation_volume=8;,citation_journal_title=The Lancet HIV;,citation_publisher=Elsevier;">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapters/intro.html">Getting Started</a></li><li class="breadcrumb-item"><a href="../chapters/story.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">A Research Story</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">The Researcher’s Guide to N3C</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/national-covid-cohort-collaborative/guide-to-n3c-v1" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="../The-Researcher-s-Guide-to-N3C.epub" title="Download ePub" class="quarto-navigation-tool px-1" aria-label="Download ePub"><i class="bi bi-journal"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/story.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">A Research Story</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/cycle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Life Cycle - From Patients to N3C Researchers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/governance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Governance, Leadership, and Operations Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/onboarding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Onboarding, Enclave Access, N3C Team Science</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Investigating</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/access.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Getting &amp; Managing Data Access</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/understanding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Understanding the Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Introducing Enclave Analysis Tools</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/practices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Best Practices for the Research Life Cycle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/publishing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Publishing and Sharing Your Work</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Special Topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/support.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Help and Support</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Machine Learning</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Back Matter</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/funding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Funding and Institutional Support</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-story-onboarding" id="toc-sec-story-onboarding" class="nav-link active" data-scroll-target="#sec-story-onboarding"><span class="header-section-number">2.1</span> Onboarding</a></li>
  <li><a href="#sec-story-team" id="toc-sec-story-team" class="nav-link" data-scroll-target="#sec-story-team"><span class="header-section-number">2.2</span> Team building &amp; collaborating</a></li>
  <li><a href="#research-teams-first-meeting" id="toc-research-teams-first-meeting" class="nav-link" data-scroll-target="#research-teams-first-meeting"><span class="header-section-number">2.3</span> Research Team’s First Meeting</a></li>
  <li><a href="#protocol-variables-definitions" id="toc-protocol-variables-definitions" class="nav-link" data-scroll-target="#protocol-variables-definitions"><span class="header-section-number">2.4</span> Protocol, variables, &amp; definitions</a></li>
  <li><a href="#learning-and-using-omop-and-ohdsi-tooling" id="toc-learning-and-using-omop-and-ohdsi-tooling" class="nav-link" data-scroll-target="#learning-and-using-omop-and-ohdsi-tooling"><span class="header-section-number">2.5</span> Learning and using OMOP and OHDSI Tooling</a></li>
  <li><a href="#creating-an-analysis-ready-dataset" id="toc-creating-an-analysis-ready-dataset" class="nav-link" data-scroll-target="#creating-an-analysis-ready-dataset"><span class="header-section-number">2.6</span> Creating an analysis-ready dataset</a></li>
  <li><a href="#analyses" id="toc-analyses" class="nav-link" data-scroll-target="#analyses"><span class="header-section-number">2.7</span> Analyses</a></li>
  <li><a href="#draft-paper-pub-committee" id="toc-draft-paper-pub-committee" class="nav-link" data-scroll-target="#draft-paper-pub-committee"><span class="header-section-number">2.8</span> Draft paper, pub committee</a>
  <ul class="collapse">
  <li><a href="#sample-email-from-n3c-publication-committee" id="toc-sample-email-from-n3c-publication-committee" class="nav-link" data-scroll-target="#sample-email-from-n3c-publication-committee"><span class="header-section-number">2.8.1</span> Sample Email from N3C Publication Committee</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/national-covid-cohort-collaborative/guide-to-n3c-v1/edit/main/chapters/story.md" class="toc-action">Edit this page</a></p><p><a href="https://github.com/national-covid-cohort-collaborative/guide-to-n3c-v1/issues/new" class="toc-action">Report an issue</a></p><p><a href="https://github.com/national-covid-cohort-collaborative/guide-to-n3c-v1/blob/main/chapters/story.md" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-story" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">A Research Story</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>Chapter Leads</strong>: Will Beasley, Jerrod Anzalone</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This chapter is being written. We hope to complete this chapter during May 2023.</p>
</div>
</div>
<p>Now that we have introduced N3C and described its motivation and importance, we’ll walk through the life cycle of an example project from onboarding to publishing. This path typically takes at least 6 months and 6 collaborators. It isn’t easy to do yourself, but fortunately N3C has attracted a large and diverse set of researchers. Coupled with a large and diverse set of robust patient records, completing a research project within a year is possible.</p>
<div id="fig-story-010-intro-to-story" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><a href="images/story/fig-story-010-intro-to-story.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Path of a typical N3C project."><img src="images/story/fig-story-010-intro-to-story.png" class="img-fluid figure-img" alt="Path of a typical N3C project"></a></p>
<figcaption class="figure-caption">Figure&nbsp;2.1: Path of a typical N3C project.</figcaption>
</figure>
</div>
<p>Suppose you are starting a project by yourself. In that case, the N3C ecosystem of researchers and resources is at your fingertips. You’ll likely be able to recruit collaborators with complementary skills (in addition to N3C-wide resources such as <a href="../chapters/support.html">instructional material</a> and <a href="../chapters/support.html#sec-support-office">office hours</a>). If you would like to join an existing project, there are <a href="../chapters/onboarding.html#sec-onboarding-dt">domain teams</a> and ongoing projects that likely will fit your interests and benefit from your abilities. <a href="#fig-story-010-intro-to-story">Figure&nbsp;<span>2.1</span></a> provides a high-level overview of the path of a typical N3C project from clinical question to research product.</p>
<p>Electronic Health Record (EHR) research has become an increasingly important tool to evaluate real-world evidence (RWE) to understand insights into treatment effectiveness, the impact of healthcare interventions, and our understanding of rare diseases. EHRs provide access to large, diverse patient populations and longitudinal data that allows observations of health changes over time or in cross-section. The strength of the EHR is that it reflects real-world care and is often a better representation of clinical care than the controlled settings of a traditional clinical trial. However, with this comes challenges of interpreting differences in care delivery, data standards, and merging expertise from clinical subject matter experts, clinical informaticists, biostatisticians and epidemiologists, medical terminologists, and other experts as healthcare data is linked with other health assets to move toward a more comprehensive representation of a patient’s lived experience relative their health outcomes.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Voice of Narrator
</div>
</div>
<div class="callout-body-container callout-body">
<p>Our story begins in your own piece of heaven: your office. As a researcher of scurvy, you have wondered, “do patients receiving the newest medications have more favorable covid outcomes than patients receiving the previous generation?” Given that scurvy is a rare disease with no opportunities for industry funding, leaving the best option for studying it observational data from the EHR. You expect a modest improvement based on the meds’ relationships with other diseases. But many patients are required to detect a modest effect size, and your local institution has a small population. Given its low prevalence, no single institution would have a sufficient sample size to answer your research question.</p>
<p>Yesterday you attended a local N3C presentation and became interested because it likely has enough qualifying scurvy patients to detect even small signals. Your mind wanders as you get a little greedy; additional hypotheses enter your daydream. <em>Does the relationship attenuate as you move inland?</em> You realize that a massive national dataset can not only better address your existing question, but it could also allow you to ask newer and more nuanced questions. <em>Is the relationship more pronounced in other racial/ethnic groups?</em> The stream persists throughout the night.</p>
</div>
</div>
<section id="sec-story-onboarding" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="sec-story-onboarding"><span class="header-section-number">2.1</span> Onboarding</h2>
<p>As is typical for access to patient data outside your own institution, institutional participation in N3C requires legal be put in place. Even with strong institutional support, execution of the university’s Data Use Agreement with the NIH may take several months in legal and administrative channels. Yet after clearing that first (tall) hurdle for your site, each specific project takes only a week or two to be processed by the N3C staff. That’s a remarkably short time considering the scale of available data. It’s likely quicker than initiating a project based on a single EMR from your site –much quicker than EMRs from 70+ sites.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Voice of Narrator
</div>
</div>
<div class="callout-body-container callout-body">
<p>The next afternoon you are chatting with your institution’s Navigator.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> She organized the local N3C presentation and invited any interested attendees to contact her.</p>
</div>
</div>
<div class="callout callout-style-simple callout-tip">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>Hover over a footnote to see the popup, without jumping to the bottom of the page.</p>
</div>
</div>
</div>
<ul>
<li><p><strong>Navigator</strong>: I’m glad you think the N3C might help your research. As I wrote in this morning’s email, the agreement between the university and the NIH was established last year, so don’t worry about that.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> There are two remaining steps. First, complete your personal paperwork.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> Second, submit a DUR tailored to your hypotheses.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p></li>
<li><p><strong>Investigator</strong>: Remind me what a DUR is?</p></li>
<li><p><strong>N</strong>: A <em>D</em>ata <em>U</em>se <em>R</em>equest describes your upcoming project. Once an NIH committee approves your proposal, your project’s code and data are protected in this workspace allotted on the NIH cloud.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> Everyone on your project uses this dedicated workspace too. But they don’t have to submit additional DURs –you grant them permission to join yours.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p></li>
<li><p><strong>I</strong>: Umm, I think I got it.</p></li>
<li><p><strong>N</strong>: It will make sense once you get it into it. Skim the example DUR proposals I’m sending now. Then start filling out this online form. Get as far as you can, and then I’ll help with the rest. If there’s something I don’t know, I’ll ask a friend. The DUR application process will take about an hour. Then the proposal will likely be approved within a week or two. In the meantime, we can talk about potential collaborators.</p></li>
<li><p><strong>I</strong>: Is there anything else I need to know?</p></li>
<li><p><strong>N</strong>: The only other consideration at this point is whether your want your study to use Level 2 or Level 3 data. Level 2 data is fully de-identified, meaning all the dates are shifted by up to 180 days. Also, all location identifiers are obfuscated to allow potential reidentification, so you won’t have access to 5-digit ZIP Codes or other granular location measures. If you need either of those, you have to submit Level 3 data, which is a limited data set containing these data elements. Some institutions requires an IRB protocol to submit a Level 3 DUR, so keep that in mind. Our institutional IRB has provided a letter covering most Level 3 DURs in N3C, so I can provide that to you.</p></li>
<li><p><strong>I</strong>: Ok, that’s very helpful. I may need real dates as I anticipate differences in treatment deliveries based on real-world availability. Am I stuck with Level 2 data if I start there?</p></li>
<li><p><strong>N</strong>: No. If needed, you can request a workspace to be updated from Level 2 to Level 3 and receive IRB approval.</p></li>
<li><p><strong>I</strong>: That’s great. I think we’ll start with Level 2 and go from there. I’ll work on the research protocol.</p></li>
</ul>
<p>After some thought, the investigator puts together a research protocol and submits a DUR in N3C. They submit the <a href="../chapters/access.html#sec-access-dur">DUR</a>, shown in <a href="#fig-story-020-dur">Figure&nbsp;<span>2.2</span></a>.</p>
<div id="fig-story-020-dur" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><a href="images/story/fig-story-020-dur.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Submitted Data Use Request."><img src="images/story/fig-story-020-dur.png" class="img-fluid figure-img" alt="Submitted Data Use Request"></a></p>
<figcaption class="figure-caption">Figure&nbsp;2.2: Submitted Data Use Request.</figcaption>
</figure>
</div>
</section>
<section id="sec-story-team" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="sec-story-team"><span class="header-section-number">2.2</span> Team building &amp; collaborating</h2>
<p>The next step is to build a team to leverage retrospective medical records. Like most contemporary research teams, heterogenous skills are important. Ideally a team has at least, as shown in <a href="#fig-story-030-team-formation">Figure&nbsp;<span>2.3</span></a>, members who can fill the roles below:</p>
<ol type="1">
<li>a <strong>navigator</strong> who has learned the administrative and IRB requirements and can facilitate the investigation,</li>
<li>a <strong>subject matter expert</strong> (SME) who has clinical experience with the disease of interest and can inform decisions with EHR variables,</li>
<li>a <strong>statistician or data scientist</strong> who understands the limitations of observational collection and can model retrospective data,</li>
<li>a <strong>logic liaison or informaticist</strong> who understands the challenges of EHRs and can extract and transform information (also known as a data engineer),</li>
<li>a <strong>data liaison</strong> who has expertise in medical terminology to help develop concept sets or identify previously validated concept sets, and</li>
<li>a <strong>principal investigator</strong> who knows the literature and can testable hypotheses and write the manuscript.</li>
</ol>
<div id="fig-story-030-team-formation" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><a href="images/story/fig-story-030-team-formation.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Typical N3C Team Composition."><img src="images/story/fig-story-030-team-formation.png" class="img-fluid figure-img" alt="Typical N3C Team Composition"></a></p>
<figcaption class="figure-caption">Figure&nbsp;2.3: Typical N3C Team Composition.</figcaption>
</figure>
</div>
<p>N3C teams have some differences from conventional research teams at single sites. Some trends we have noticed are:</p>
<ol type="1">
<li><p>Most N3C teams have researchers from multiple institutions. In the experience of the authors and editors, this encourages more diverse opinions and more willingness to express constructive criticism. Researchers from a single institution/lab are sometimes more reluctant to generate contrary views.</p></li>
<li><p>The role of the navigator is often the most important member of a successful team. Your local investigations are likely guided by someone with years of experience with institutional safeguards and the personnel who can help when something stalls. N3C is bigger and younger than your site’s EHR research team, so an N3C project will benefit when guided by a bright, patient, and persistent navigator.</p></li>
</ol>
<p>If your team needs someone, consider asking a relevant <a href="../chapters/onboarding.html#sec-onboarding-dt">domain team</a> for help identifying and approaching potential collaborators. Note that community-wide data and logic liaisons are available for consultation during regular office hours.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Voice of Narrator
</div>
</div>
<div class="callout-body-container callout-body">
<p>Recruiting your crew…</p>
</div>
</div>
</section>
<section id="research-teams-first-meeting" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="research-teams-first-meeting"><span class="header-section-number">2.3</span> Research Team’s First Meeting</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Voice of Narrator
</div>
</div>
<div class="callout-body-container callout-body">
<p>Three weeks later…</p>
<p>Once the team is assembled, the first discussion is usually a variation of this exchange, with the goal to move toward competition of a research protocol:</p>
</div>
</div>
<ul>
<li><strong>Investigator</strong>: Welcome everyone. We’d like to know if Drug A or Drug B is associated with better outcomes.</li>
<li><strong>Statistician</strong>: No problem. I can longitudinally model the type and amount of each medication received by each patient, relative to their intake date.</li>
<li><strong>Logic Liaison</strong>: Hmmm. I’m happy to produce a dataset with the <code>dose</code> and <code>frequency</code> columns<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>, but you may not find it useful. Those two columns are sparsely populated and they look inconsistent across sites.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></li>
<li><strong>I</strong>: Bummer. Then what’s realistic or feasible?</li>
<li><strong>Subject Matter Expert</strong>: Maybe this simplifies the picture… In my clinical experience, a patient rarely switches between Drugs A &amp; B. Based on the initial presentation, their provider will pick A <em>or</em> B, and complete the regimen unless there’s an adverse event.</li>
<li><strong>St</strong>: In that case, should my initial model have three levels for treatment: A, B, and A+B?</li>
<li><strong>I</strong>: Probably. In the N3C database, can someone tell me how many patients get both during the same visit?</li>
<li><strong>LL</strong>: I’m already logged into the Enclave<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>. Give me 2 minutes to add this drug to our templated fact tables which show same day events and also summarize events at the patient level.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></li>
<li><strong>I</strong>: Oh my goodness, is that your cat? What a cutie!<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></li>
<li><strong>LL</strong> <em>after a few minutes</em>: Ok, I got it. [Unmutes himself.] Ok, I got it. 40% of patients are Drug A only, 52% are Drug B only, while 8% have at least one administration of both Drug A &amp; B in the same visit.</li>
<li><strong>SME</strong>: Weird. 8% is a lot more than I expected. I was thinking around 1%.</li>
<li><strong>LL</strong>: Hmm, let me check. Give me another minute.<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a></li>
<li><strong>LL</strong> <em>after a few minutes</em>: I see what you mean. It looks like the bulk of the combo patients were admitted in the spring of 2020. After Jan 2021, only 3% of patients have both Drug A &amp; B.</li>
<li><strong>St</strong>: I was already planning to model the phase of the pandemic. I’ll test if there’s a significant interaction between time and treatment.</li>
<li><strong>I</strong>: I like that as a starting point. Regarding the question about dose and frequency… For now let’s assume the providers were following the current dosing guidelines. Therefore the <code>dose</code> and <code>frequency</code> variables can be dropped from the analyses.</li>
<li><strong>St</strong>: Phew. I didn’t want to admit this. But I skimmed the dosing guidelines you emailed yesterday. It looked complicated. I wasn’t sure if I could appropriately incorporate those variables in the model.</li>
<li><strong>I</strong>: Well, that’s everything I wanted to cover today. See you in two weeks. Wait. I can’t believe I forgot. Sorry -our Navigator is sick this week and I’m almost worthless in her absence. Is everyone still on the call? For our secondary hypothesis, we want everything to connect to a patient’s diagnoses. …before, during, and after their covid hospitalization.</li>
<li><strong>LL</strong>: Bad news. This is kinda like the <code>dose</code> and <code>frequency</code> situation a few minutes ago. The structure of the <a href="https://ohdsi.github.io/CommonDataModel/cdm60.html#CONDITION_OCCURRENCE">OMOP diagnosis table</a> theoretically can connect a patient’s diagnoses across different locations. But the quality of the historical records really depends on the site. Some places like Rhode Island leverage their state’s HIE<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a> to populate their N3C dataset. However other places are not as well connected. If a patient doesn’t have diagnosis records, it’s tough to determine if they are healthy, or if their primary care provider uses a siloed EMR.<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a></li>
<li><strong>I</strong>: Ugh. Good point.</li>
<li><strong>LL</strong>: But I’ve got good news. All the N3C contributors comprehensively capture all conditions diagnosed <em>during</em> the visit. Furthermore the diagnosis codes are standardized really well across sites. That’s because all the providers enter ICD codes into the EMR, which eventually can be cleanly mapped to OMOP’s standard concepts.<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a></li>
<li><strong>I</strong>: Well, that’s fine for this paper. Maybe our next manuscript will follow up with N3C’s death records.<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a></li>
<li><strong>SME</strong>: Sorry everybody, I have clinic this week, and they’re calling me. I need to drop.<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a></li>
<li><strong>St</strong>: Can I go back and ask a question about medications? I see that Drug A has 15 different brand names. I don’t recognize half of them. How should I classify them?</li>
<li><strong>LL</strong>: It’s actually worse than that. Sorry I’m a downer today. Can you see my screen? Drug A has 15 brand names and 200 different RxNorm codes; each package is uniquely identified by the NIH’s NLM. SME and I started on a concept set Thursday. We’re operationalizing the drug classes by their <a href="https://www.nlm.nih.gov/research/umls/rxnorm/docs/appendix5.html">RxNorm</a> ingredient. There are five ingredients that are conceptualized as Drug A. A friend showed me how she used the OMOP tables in a different project.<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a> I’ll roll up the meds into the patient-level dataset. It will have one integer for the number of medication records tied to a Drug A ingredient and another integer for Drug B records. You’ll probably want to transform the two counts into two booleans.</li>
<li><strong>St</strong>: And if I change my mind and decide to use the counts, then at least I’ll know.</li>
<li><strong>Shoreleave</strong>: and knowing is half the battle.</li>
</ul>
</section>
<section id="protocol-variables-definitions" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="protocol-variables-definitions"><span class="header-section-number">2.4</span> Protocol, variables, &amp; definitions</h2>
<p>Developing a research protocol is both familiar and vague for most research teams in the context of EHR studies. Most researchers have several years of graduate-level courses and real-world experience.</p>
<ol type="1">
<li><p>Tradeoffs are inevitable when selecting variables. Rarely will an investigator’s first choice be available.</p></li>
<li><p>Retrospective medical records are extracted from a larger dataset. An investigation can use only a fraction of the terabytes in an EMR. Many decisions are involved to include only the relevant variables among the qualifying patients.</p></li>
</ol>
<p>While there are different approaches to developing a Research Protocol, the general steps involved include:</p>
<ol type="1">
<li><p>Define the research question: The first step is to clearly define the research question and the patient population of interest. This will guide the selection of relevant clinical concepts and data sources.</p></li>
<li><p>Determine the study design: The research team should choose an appropriate study design, such as a cohort study or case-control study, and determine the inclusion and exclusion criteria for the patient population.</p></li>
<li><p>Develop the analytic plan: The research team should prospectively specify the statistical methods to be used to analyze the data, including any adjustments for confounding variables and any sensitivity analyses.</p></li>
<li><p>Document the study protocol: The research team should document a detailed study protocol that includes all of the above information, as well as any other relevant information, such as the ethical and regulatory considerations, data privacy and security measures, and data sharing agreements. N3C contains a Protocol Pad that supports the development and documentation of detailed study protocols.</p></li>
</ol>
<p>After creating a research protocol, variable definitions are decided using OMOP and N3C tools and deployed in the Enclave.</p>
</section>
<section id="learning-and-using-omop-and-ohdsi-tooling" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="learning-and-using-omop-and-ohdsi-tooling"><span class="header-section-number">2.5</span> Learning and using OMOP and OHDSI Tooling</h2>
<p>The <a href="https://www.ohdsi.org/">Observational Health Data Sciences and Informatics (OHDSI)</a> Observational Health Data Sciences and Informatics (OHDSI) program maintains the Observational Medical Outcomes Partnership (OMOP) common data model (CDM). OMOP was funded in 2008 by the US Food and Drug Administration, primarily for adverse drug events surveillance, but it has since expanded to become the de-facto global research CDM. Detecting a small signal requires a large datasets –larger than any single health care database <span class="citation" data-cites="ohdsi_2019">(<a href="../references.html#ref-ohdsi_2019" role="doc-biblioref">OHDSI 2019, chap. 1</a>)</span>. Given its ubiquity and active research community, OMOP is well suited for N3C. OMOP has extensive tooling to support researchers, including two that directly support the curation of concept sets from the OHDSI program and one that is specific to N3C:</p>
<ol type="1">
<li><p><a href="https://github.com/OHDSI/Atlas/wiki">Atlas</a> provides a user-friendly interface for querying and analyzing data in the OMOP CDM. In the context of N3C, it supports browsing medical terminology and supports the development of concept sets.</p></li>
<li><p><a href="https://athena.ohdsi.org/">Athena</a> is a centralized repository of standardized clinical vocabularies.</p></li>
<li><p>The <a href="@sec-tools">N3C Concept Set Browser</a> is an N3C specific tool that allows you to explore and modify existing concept sets as well as create new concept sets to fit your exact study needs.</p></li>
</ol>
<p>Concept sets, described in detail in <a href="understanding.html"><span>Chapter&nbsp;7</span></a> and <a href="tools.html"><span>Chapter&nbsp;8</span></a>, are the basic building blocks of an analytic dataset. The contain lists of medical codes, usually restricted to very specific definition or computable phenotype. In N3C, they are used to identify cohorts or exposures to answer a research question. They point to standardized vocabularies and clinically organized domains in the OMOP CDM (e.g., drug, condition, measurement).</p>
<p>In general, the overall process involved in developing concepts is as follows:</p>
<ol type="1">
<li>Define the research question: The first step is for the research team to clearly define the research question and population of interest, which will guide the selection of relevant clinical concepts.</li>
<li>Explore the data: Using Atlas or the N3C Concept Set Browser, the team member filling as the data liaison will explore the data available or existing concept sets to identify relevant clinical concepts.</li>
<li>Refine the concept set: The data liaison works with the SME to refine the concept set, which is usually an iterative process, to include clinically relevant and exclude clinically irrelevant concepts.</li>
<li>Validate the concept set: Once the concept set has been defined, the SME and logic liaison validate the concept set and publish it in the N3C Concept Set Browser, which allows for reuse across the N3C community.</li>
</ol>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Voice of Narrator
</div>
</div>
<div class="callout-body-container callout-body">
<p>After determining the need for a concept set defining anemia, which is a common symptom of scurvy, the subject matter expert and data liaison meet to refine the concept set.</p>
</div>
</div>
<ul>
<li><strong>Data Liaison</strong>: Good morning! I’ve started digging into existing concept sets for anemia and found one potential option.</li>
<li><strong>Subject Matter Expert</strong>: Good morning! That’s great. Let’s take a look at it.</li>
<li><strong>DL</strong> <em>pulls up concept set for anemia</em>: This is one that’s out there. It uses the parent SNOMED CT Code <a href="https://athena.ohdsi.org/search-terms/terms/439777">271737000</a>.</li>
<li><strong>SME</strong>: Hmm…this isn’t quite right. We need anemia caused by blood loss. A lot of these are unrelated.</li>
<li><strong>DL</strong>: Gotcha. Let’s take a look at the hierarchy and see if we can refine it. We can look at the descendants and go from there.</li>
<li><em>Three hours later</em></li>
<li><strong>DL</strong>: Ok, great. I think we have a working example. I’m going to extract all of these into a spreadsheet. Please go through this one more time and then I’ll share with the group to review.</li>
</ul>
</section>
<section id="creating-an-analysis-ready-dataset" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="creating-an-analysis-ready-dataset"><span class="header-section-number">2.6</span> Creating an analysis-ready dataset</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Voice of Narrator
</div>
</div>
<div class="callout-body-container callout-body">
<p>Once the project team has outlined the study protocol, key definitions, and timing of study elements, the next phase is the curation of a dataset for analysis. This is typically within the purview of the team informaticist or logic liaison. Let’s take a peak into the process…</p>
</div>
</div>
<p>After clarifying all the data elements and study protocol, the next step is to curate an an analytic dataset. Depending on the study design, this can be organized in multiple ways. In general, analytic datasets are organized at either the person or encounter level. This means that you’ll have a single analytic dataset that contains one row with facts about either an individual patient or an individual encounter. This topic is covered in greater detail in the <a href="../chapters/tools.html">Tools</a> and <a href="../chapters/practices.html">Best Practices</a> chapters.</p>
<p>Using the previously defined protocol, the informaticist will use the [concept set browser] to identify or create concept sets of relevance to the study and begin to pull together the analytic dataset in a <a href="../chapters/tools.html#sec-tools-apps-workbook">code workbook</a> or <a href="../chapters/tools.html#sec-tools-apps-repo">code repository</a> in the N3C Enclave. This will be a time-intensive process that, once completed, will result in a dataset that is ready for analysis, which can be handed off to the team’s statistician for analysis. N3C Logic Liaison templates are available to help build these datasets more quickly using defined pipelines where the custom concept sets can quickly be added as inputs. They also provide templates to assess the quality of the derived dataset which can provide insights into data density and completeness and help support decisions about dropping certain sites for the analysis (for example, if they appear to be systematically missing key variables).</p>
<div style="overflow-x:auto;">
<div id="tbl-story-analytic" class="anchored">
<table class="table">
<caption>Table&nbsp;2.1: Scurvy Analytic Dataset</caption>
<colgroup>
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 13%">
<col style="width: 7%">
<col style="width: 11%">
<col style="width: 5%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 1%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th>Age</th>
<th>Sex</th>
<th style="text-align: left;">Race Ethnicity</th>
<th style="text-align: left;">Quarter of COVID dx</th>
<th style="text-align: left;">Smoking Status</th>
<th style="text-align: center;">Scurvy pre-COVID</th>
<th style="text-align: center;">Med A</th>
<th style="text-align: center;">Med B</th>
<th style="text-align: center;">Diabetes pre-COVID</th>
<th style="text-align: center;">COPD pre-COVID</th>
<th style="text-align: center;">Liver Disease pre-COVID</th>
<th style="text-align: center;">Cancer pre-COVID</th>
<th style="text-align: center;">Renal Disease pre-COVID</th>
<th style="text-align: center;">COVID Hospitalization</th>
<th style="text-align: center;">ECMO IMV</th>
<th style="text-align: center;">Time to ECMO IMV</th>
<th style="text-align: center;">Death</th>
<th style="text-align: right;">Time to Death</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>27</td>
<td>M</td>
<td style="text-align: left;">Non-Hispanic White</td>
<td style="text-align: left;">2022<br>Q2</td>
<td style="text-align: left;">Current or Former Smoker</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">28</td>
<td style="text-align: center;">0</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="even">
<td>75</td>
<td>F</td>
<td style="text-align: left;">Hispanic or Latinx</td>
<td style="text-align: left;">2021<br>Q1</td>
<td style="text-align: left;">No Documented History of Smoking</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">28</td>
<td style="text-align: center;">0</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="odd">
<td>54</td>
<td>M</td>
<td style="text-align: left;">Non-Hispanic Black or African American</td>
<td style="text-align: left;">2020<br>Q4</td>
<td style="text-align: left;">No Documented History of Smoking</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td>34</td>
<td>F</td>
<td style="text-align: left;">Non-Hispanic White</td>
<td style="text-align: left;">2023<br>Q1</td>
<td style="text-align: left;">Current or Former Smoker</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">1</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td>…</td>
<td>…</td>
<td style="text-align: left;">…</td>
<td style="text-align: left;">…</td>
<td style="text-align: left;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: right;">…</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="analyses" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="analyses"><span class="header-section-number">2.7</span> Analyses</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Voice of Narrator
</div>
</div>
<div class="callout-body-container callout-body">
<p>Once the analytic dataset is finalized, the handoff between the informaticist and statistician takes place. This often requires a discussion or ongoing dialogue to understand the data structure and definitions.</p>
</div>
</div>
<ul>
<li><strong>Navigator</strong>: Welcome everyone. Today we’d like to review the analytic dataset and next steps in moving the analysis forward.</li>
<li><strong>Informaticist</strong>: Yep. I’ve made a new code workbook in your folder in the project workspace. Can you pull it up and we can take a look?</li>
<li><strong>Statistician</strong>: Sure. Did you send me the dataset? I don’t remember seeing an email.</li>
<li><strong>N</strong>: Remember, everything has to be done within the secure N3C platform. So you won’t be doing anything on your local machine. It all has to be done within the platform. Do you know how to get to the project workspace?</li>
<li><strong>S</strong>: …remind me.</li>
<li><em>A few minutes later after a refresher.</em></li>
<li><strong>S</strong>: Ok, great. I think I get it. So it’s not that different from using R in RStudio as long as I follow the documentation you sent me. I think I can figure that out. What happens when I want to share results with the rest of the team? Can I send them out?</li>
<li><strong>N</strong>: You can add them to a report and share them within the N3C Enclave to those who have access to our project workspace. If you want to share results outside the platform, you can request any summary results, model output, or plots using the download review process. N3C leadership reviews any results before they can be extracted from the Enclave to ensure compliance with the N3C privacy and security expectations.</li>
<li><strong>S</strong>: Gotcha. I’ll reach out if I have any questions once I get to that point in the process. Thanks!</li>
</ul>
<p>From here, the statistician can work directly in N3C using R or Python for data analysis. After some work figuring out the platform, the statistician has some simple summary statistics to add to a report. Within a code workbook, they develop the following code and output to add to a report.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>descriptive_statistics <span class="ot">&lt;-</span> <span class="cf">function</span>(analytic_dataset) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(gtsummary)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  patient_characteristics <span class="ot">&lt;-</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    analytic_dataset <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>      Scurvy_Indicator_Before_COVID,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>      Age,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>      Race_Ethnicity,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>      Medication_A,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>      Medication_B,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    gtsummary<span class="sc">::</span><span class="fu">tbl_summary</span>(</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">by =</span> Scurvy_Indicator_Before_COVID</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  table1 <span class="ot">&lt;-</span> patient_characteristics <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(table1, <span class="at">col_labels =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(table1)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Which produces the following <a href="#tbl-story-demographics">Table&nbsp;<span>2.2</span></a>.</p>
<div id="tbl-story-demographics" class="anchored">
<table class="table">
<caption>Table&nbsp;2.2: Characteristics of Patients with and without Scurvy</caption>
<colgroup>
<col style="width: 52%">
<col style="width: 23%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: right;">No History&nbsp;of&nbsp;Scurvy</th>
<th style="text-align: right;">History&nbsp;of&nbsp;Scurvy</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Patient Count</td>
<td style="text-align: right;">19,871</td>
<td style="text-align: right;">2,199</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age, Median<br>(IQR)</td>
<td style="text-align: right;">50<br>(25,&nbsp;75)</td>
<td style="text-align: right;">51<br>(27,&nbsp;75)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Race/Ethnicity</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Non-Hispanic<br>White</td>
<td style="text-align: right;">7,834<br>(39%)</td>
<td style="text-align: right;">883<br>(40%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Non-Hispanic<br>Black or African American</td>
<td style="text-align: right;">3,970<br>(20%)</td>
<td style="text-align: right;">431<br>(20%)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hispanic or Latinx</td>
<td style="text-align: right;">3,986<br>(20%)</td>
<td style="text-align: right;">430<br>(20%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Missing/Other</td>
<td style="text-align: right;">4,081<br>(21%)</td>
<td style="text-align: right;">455<br>(21%)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Medication A</td>
<td style="text-align: right;">3,017<br>(15%)</td>
<td style="text-align: right;">318<br>(14%)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Medication B</td>
<td style="text-align: right;">1,661<br>(8%)</td>
<td style="text-align: right;">173<br>(8%)</td>
</tr>
</tbody>
</table>
</div>
<!--,<br>January 2020 - December 2022-->
<p>After repeating this for the remaining analyses for the project, the statistician creates a report and requests it be reviewed by the <a href="../chapters/publishing.html">N3C Download Review Committee</a></p>
<ul>
<li><strong>Statistician</strong>: Good afternoon! I just received notification from N3C that my download review request was approved. What happens now?</li>
<li><strong>Navigator</strong>: That’s great! Now that it’s been approved, you can go into the Download Review Dashboard and there’s an area where you can safely download the results. The review comes with a DRR #, which is required to download the associated results.</li>
<li><strong>S</strong>: Ok. And then I can send it out to the rest of the team?</li>
<li><strong>N</strong>: Yep! Once it’s been reviewed, you can share it with the rest of the team outside of the Enclave.</li>
<li><strong>S</strong>: Great. Thank you! I’ll set up a time to review the results with the team next week.</li>
</ul>
</section>
<section id="draft-paper-pub-committee" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="draft-paper-pub-committee"><span class="header-section-number">2.8</span> Draft paper, pub committee</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Voice of Narrator
</div>
</div>
<div class="callout-body-container callout-body">
<p>Nearing the trail head…</p>
</div>
</div>
<ul>
<li><strong>Investigator</strong>: Thanks everyone for making this meeting. I hope you’ve had a chance to review the results that were circulated last week.</li>
<li><strong>Subject Matter Expert</strong>: They looked great. Very unexpected, but intriguing results. I was surprised that outcomes were so much better in those exposed Medication B than Medication A.</li>
<li><em>Team reviews the results in detail. Manuscript write-up divided amongst the study team.</em></li>
<li><strong>I</strong>: Ok, so we should all know what the next steps are in terms of the write-up. Are there any other requirements from N3C before we can submit the paper to our target journal?</li>
<li><strong>Navigator</strong>: Good question. The manuscript draft has to be reviewed by the N3C Publication Committee. They meet weekly and will review the drat to make sure it’s compliant with N3C policies and adheres to the original research question proposed by us.</li>
<li><strong>I</strong>: Ok, that makes sense. How long does it usually take?</li>
<li><strong>N</strong>: In my experience, it’s a pretty quick turnaround. Usually 1-2 weeks unless there are serious issues with the draft. They are primarily concerned about compliance with N3C policies, such as not having small cell counts and having gone through the download review process. Since we did this, it should be a quick review.</li>
<li><strong>I</strong>: Awesome. I hope you’ll be able to help us when we get to the step. Thank you!</li>
<li><strong>N</strong>: Of course. Let’s plan on meeting after the draft is closer to being finished.</li>
<li><strong>I</strong>: Sounds great. See you all in two weeks!</li>
</ul>
<p>At this point, the team divides up the remaining work and gets to writing. After completing a draft that’s almost ready to be submitted for publication, they submit their draft to the <a href="../chapters/publishing.html">N3C Publication Committee</a>. After a week, they hear back from the N3C Publication Committee.</p>
<section id="sample-email-from-n3c-publication-committee" class="level3" data-number="2.8.1">
<h3 data-number="2.8.1" class="anchored" data-anchor-id="sample-email-from-n3c-publication-committee"><span class="header-section-number">2.8.1</span> Sample Email from N3C Publication Committee</h3>
<blockquote class="blockquote">
<p>Title: Approved to submit MSID:383.23 | Investigator | The Impact of Drug A and Drug B on Patient with Scurvy Post-Acute COVID-19</p>
<p>Dear Investigator,</p>
<p>The publication committee has reviewed and conditionally approved your manuscript for submission. The following must be addressed: Please add “on behalf of the N3C consortium” to the end of the author list with an asterisk that says consortial contributors are in the process of being documented.</p>
<p>Sincerely, The N3C Publication Committee</p>
</blockquote>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional Chapter Details
</div>
</div>
<div class="callout-body-container callout-body">
<p>This chapter was first published May 2023. The chapter’s corresponding author is Will Beasley. If you have suggested modifications or additions, please see <a href="../index.html#sec-welcome-contribute">How to Contribute</a> on the book’s initial page.</p>
</div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-ohdsi_2019" class="csl-entry" role="listitem">
OHDSI. 2019. <em>The Book of OHDSI: Observational Health Data Sciences and Informatics</em>. United States: OHDSI. <a href="https://ohdsi.github.io/TheBookOfOhdsi/">https://ohdsi.github.io/TheBookOfOhdsi/</a>.
</div>
</div>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>This role may be called something differently at your Institution; the roles are defined below in <a href="#sec-story-team"><span>Section&nbsp;2.2</span></a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Read about the institutional-level DUA in <a href="onboarding.html"><span>Chapter&nbsp;5</span></a>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>See <a href="onboarding.html"><span>Chapter&nbsp;5</span></a>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Project-level paperwork are discussed in <a href="onboarding.html"><span>Chapter&nbsp;5</span></a>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>The NIH “Enclave” is detailed in <a href="tools.html"><span>Chapter&nbsp;8</span></a>.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>DURs are the topic of <a href="access.html"><span>Chapter&nbsp;6</span></a>.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Read about the OMOP Standard Tables in <a href="understanding.html"><span>Chapter&nbsp;7</span></a>, specifically the medications are in the <a href="https://ohdsi.github.io/CommonDataModel/cdm60.html#DRUG_EXPOSURE"><code>drug_exposure</code></a> table.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Conformance is a topic in <a href="cycle.html"><span>Chapter&nbsp;3</span></a>.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>See <a href="access.html"><span>Chapter&nbsp;6</span></a> for accessing the N3C Enclave.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>Read about SQL, Python, and R transforms in Code Workbooks in <a href="tools.html"><span>Chapter&nbsp;8</span></a>.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>There is a brief discussion of SME’s cat.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>There is a brief discussion of S’s daughter strutting in the background wearing a cowboy hat and waiving a fairy wand.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p>An <a href="https://www.healthit.gov/topic/health-it-and-health-information-exchange-basics/health-information-exchange">HIE</a> is a health information exchange.<a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p>The benefits and caveats of real-world data are a theme throughout the book, particularly in the best practices discussed in <a href="practices.html"><span>Chapter&nbsp;9</span></a>.<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn15"><p>Authoring and using concept sets are described in <a href="understanding.html"><span>Chapter&nbsp;7</span></a>. Mapping an ICD to SNOMED diagnosis code is an example of mapping a “non-standard” to a “standard” concept, discussed in <a href="understanding.html"><span>Chapter&nbsp;7</span></a>.<a href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn16"><p>TODO: is the book planning to have a section on the CMS &amp; death records?<a href="#fnref16" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn17"><p>Everyone says goodbye to the cat.<a href="#fnref17" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn18"><p>The <a href="https://ohdsi.github.io/CommonDataModel/cdm60.html#CONCEPT_RELATIONSHIP"><code>concept_relationship</code></a> table is discussed with the OMOP concept hierarchy in <a href="understanding.html"><span>Chapter&nbsp;7</span></a>.<a href="#fnref18" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/intro.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/cycle.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Life Cycle - From Patients to N3C Researchers</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left"><a href="https://ncats.nih.gov/n3c/">N3C</a> © <a href="https://creativecommons.org/licenses/by-nd/4.0/"> CC BY-ND 4</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Part of <a href="https://covid.cd2h.org/">NIH NCATS</a>.</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"descPosition":"bottom","openEffect":"zoom","loop":true,"closeEffect":"zoom","selector":".lightbox"});</script>



</body></html>